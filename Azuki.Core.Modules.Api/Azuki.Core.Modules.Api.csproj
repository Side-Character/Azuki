<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>netstandard2.1</TargetFramework>
    <Version>1.0.12</Version>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
    <AssemblyVersion>1.0.11.0</AssemblyVersion>
    <FileVersion>1.0.11.0</FileVersion>
	<RepositoryUrl>https://github.com/Side-Character/Azuki</RepositoryUrl>
	<RunPostBuildEvent>Always</RunPostBuildEvent>
  </PropertyGroup>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent" Condition="'$(BuildingInsideVisualStudio)' == '' Or'$(BuildingInsideVisualStudio)' == 'false' And '$(OS)' == 'Windows_NT'">
    <Exec Command="dotnet pack --configuration $(ConfigurationName)" />
    <Exec Command="forfiles /P $(ProjectDir)bin/$(ConfigurationName) /m *.nupkg /c &quot;cmd /c dotnet nuget push @FILE --source github --skip-duplicate&quot;" />
  </Target>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent" Condition="'$(BuildingInsideVisualStudio)' == '' Or'$(BuildingInsideVisualStudio)' == 'false' And '$(OS)' == 'Unix'">
    <Exec Command="dotnet pack --configuration $(ConfigurationName)" />
    <Exec Command="find  $(ProjectDir)bin/$(ConfigurationName) -name '*.nupkg' -exec dotnet nuget push {} --source github --skip-duplicate \;" />
  </Target>

</Project>
